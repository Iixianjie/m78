{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/m78/src/config/handle.ts"],"sourcesContent":["import { M78SeedState } from \"./types\";\nimport { i18n } from \"../i18n\";\n\n/** 黑暗模式处理 */\nexport function darkModeHandle(darkMode?: boolean) {\n  if (\n    darkMode !== undefined &&\n    typeof window !== \"undefined\" &&\n    window.document\n  ) {\n    document.documentElement.setAttribute(\n      \"data-mode\",\n      darkMode ? \"dark\" : \"light\"\n    );\n  }\n}\n\n/** 国际化处理 */\nexport function i18nHandle(i18nConf: M78SeedState[\"i18n\"]) {\n  if (i18nConf) {\n    if (i18nConf.appendResource) {\n      // 每次只能添加一个命名空间, 这里需要循环处理一下\n      Object.entries(i18nConf.appendResource).forEach(([lng, resource]) => {\n        Object.entries(resource).forEach(([ns, conf]) => {\n          i18n.addResourceBundle(lng, ns, conf, true, true);\n        });\n      });\n    }\n\n    if (i18nConf.lng) {\n      i18n.changeLanguage(i18nConf.lng, (err) => {\n        if (err) console.warn(err);\n      });\n    }\n  }\n}\n"],"names":["i18n","darkModeHandle","darkMode","undefined","window","document","documentElement","setAttribute","i18nHandle","i18nConf","appendResource","Object","entries","forEach","lng","resource","ns","conf","addResourceBundle","changeLanguage","err","console","warn"],"mappings":"AAAA;AACA,SAASA,IAAI,QAAQ,SAAS,CAAC;AAE/B,WAAW,GACX,OAAO,SAASC,cAAc,CAACC,QAAkB,EAAE;IACjD,IACEA,QAAQ,KAAKC,SAAS,IACtB,OAAOC,MAAM,KAAK,WAAW,IAC7BA,MAAM,CAACC,QAAQ,EACf;QACAA,QAAQ,CAACC,eAAe,CAACC,YAAY,CACnC,WAAW,EACXL,QAAQ,GAAG,MAAM,GAAG,OAAO,CAC5B,CAAC;IACJ,CAAC;AACH,CAAC;AAED,UAAU,GACV,OAAO,SAASM,UAAU,CAACC,QAA8B,EAAE;IACzD,IAAIA,QAAQ,EAAE;QACZ,IAAIA,QAAQ,CAACC,cAAc,EAAE;YAC3B,2BAA2B;YAC3BC,MAAM,CAACC,OAAO,CAACH,QAAQ,CAACC,cAAc,CAAC,CAACG,OAAO,CAAC,gBAAqB;yDAAnBC,GAAG,YAAA,EAAEC,QAAQ,YAAA;gBAC7DJ,MAAM,CAACC,OAAO,CAACG,QAAQ,CAAC,CAACF,OAAO,CAAC,gBAAgB;6DAAdG,EAAE,YAAA,EAAEC,IAAI,YAAA;oBACzCjB,IAAI,CAACkB,iBAAiB,CAACJ,GAAG,EAAEE,EAAE,EAAEC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;gBACpD,CAAC,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;QACL,CAAC;QAED,IAAIR,QAAQ,CAACK,GAAG,EAAE;YAChBd,IAAI,CAACmB,cAAc,CAACV,QAAQ,CAACK,GAAG,EAAE,SAACM,GAAG,EAAK;gBACzC,IAAIA,GAAG,EAAEC,OAAO,CAACC,IAAI,CAACF,GAAG,CAAC,CAAC;YAC7B,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;AACH,CAAC"}