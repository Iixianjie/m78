{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/verify/src/validator/array.ts"],"sourcesContent":["import { isArray, isNumber } from \"@m78/utils\";\nimport { Meta, Validator } from \"../types\";\n\ninterface Opt {\n  /** 最大长度 */\n  max?: number;\n  /** 最小长度 */\n  min?: number;\n  /** 指定长度 */\n  length?: number;\n}\n\nexport const arrayValidatorKey = \"verifyArray\";\n\n/**\n * 数组验证器\n * */\nexport const array = (option?: Opt) => {\n  const arrayValidator: Validator = ({ value, config }: Meta) => {\n    const pack = config.languagePack.array;\n\n    if (!isArray(value))\n      return {\n        errorTemplate: pack.notExpected,\n        interpolateValues: option || {},\n      };\n\n    if (!option) return;\n\n    if (isNumber(option.length) && value.length !== option.length)\n      return {\n        errorTemplate: pack.length,\n        interpolateValues: option!,\n      };\n\n    if (isNumber(option.max) && value.length > option.max)\n      return {\n        errorTemplate: pack.max,\n        interpolateValues: option!,\n      };\n\n    if (isNumber(option.min) && value.length < option.min)\n      return {\n        errorTemplate: pack.min,\n        interpolateValues: option!,\n      };\n  };\n\n  arrayValidator.key = arrayValidatorKey;\n\n  return arrayValidator;\n};\n"],"names":["isArray","isNumber","arrayValidatorKey","array","option","arrayValidator","value","config","pack","languagePack","errorTemplate","notExpected","interpolateValues","length","max","min","key"],"mappings":"AAAA,SAASA,OAAO,EAAEC,QAAQ,QAAQ,YAAY,CAAC;AAY/C,OAAO,IAAMC,iBAAiB,GAAG,aAAa,CAAC;AAE/C;;GAEG,GACH,OAAO,IAAMC,KAAK,GAAG,SAACC,MAAY,EAAK;IACrC,IAAMC,cAAc,GAAc,gBAA6B;YAA1BC,KAAK,SAALA,KAAK,EAAEC,MAAM,SAANA,MAAM;QAChD,IAAMC,IAAI,GAAGD,MAAM,CAACE,YAAY,CAACN,KAAK,AAAC;QAEvC,IAAI,CAACH,OAAO,CAACM,KAAK,CAAC,EACjB,OAAO;YACLI,aAAa,EAAEF,IAAI,CAACG,WAAW;YAC/BC,iBAAiB,EAAER,MAAM,IAAI,EAAE;SAChC,CAAC;QAEJ,IAAI,CAACA,MAAM,EAAE,OAAO;QAEpB,IAAIH,QAAQ,CAACG,MAAM,CAACS,MAAM,CAAC,IAAIP,KAAK,CAACO,MAAM,KAAKT,MAAM,CAACS,MAAM,EAC3D,OAAO;YACLH,aAAa,EAAEF,IAAI,CAACK,MAAM;YAC1BD,iBAAiB,EAAER,MAAM;SAC1B,CAAC;QAEJ,IAAIH,QAAQ,CAACG,MAAM,CAACU,GAAG,CAAC,IAAIR,KAAK,CAACO,MAAM,GAAGT,MAAM,CAACU,GAAG,EACnD,OAAO;YACLJ,aAAa,EAAEF,IAAI,CAACM,GAAG;YACvBF,iBAAiB,EAAER,MAAM;SAC1B,CAAC;QAEJ,IAAIH,QAAQ,CAACG,MAAM,CAACW,GAAG,CAAC,IAAIT,KAAK,CAACO,MAAM,GAAGT,MAAM,CAACW,GAAG,EACnD,OAAO;YACLL,aAAa,EAAEF,IAAI,CAACO,GAAG;YACvBH,iBAAiB,EAAER,MAAM;SAC1B,CAAC;IACN,CAAC,AAAC;IAEFC,cAAc,CAACW,GAAG,GAAGd,iBAAiB,CAAC;IAEvC,OAAOG,cAAc,CAAC;AACxB,CAAC,CAAC"}