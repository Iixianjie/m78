{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/verify/src/validator/string.ts"],"sourcesContent":["import { isNumber, isString } from \"@m78/utils\";\nimport { Meta, Validator } from \"../types\";\n\ninterface Opt {\n  max?: number;\n  min?: number;\n  length?: number;\n}\n\nexport const stringValidatorKey = \"verifyString\";\n\n/**\n * string验证器\n * */\nexport const string = (option?: Opt) => {\n  const stringValidator: Validator = ({ value, config }: Meta) => {\n    const pack = config.languagePack.string;\n    if (!isString(value))\n      return {\n        errorTemplate: pack.notExpected,\n        interpolateValues: option || {},\n      };\n\n    if (!option) return;\n\n    if (isNumber(option.length) && value.length !== option.length)\n      return {\n        errorTemplate: pack.length,\n        interpolateValues: option!,\n      };\n\n    if (isNumber(option.max) && value.length > option.max)\n      return {\n        errorTemplate: pack.max,\n        interpolateValues: option!,\n      };\n\n    if (isNumber(option.min) && value.length < option.min)\n      return {\n        errorTemplate: pack.min,\n        interpolateValues: option!,\n      };\n  };\n\n  stringValidator.key = stringValidatorKey;\n\n  return stringValidator;\n};\n"],"names":["isNumber","isString","stringValidatorKey","string","option","stringValidator","value","config","pack","languagePack","errorTemplate","notExpected","interpolateValues","length","max","min","key"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,QAAQ,QAAQ,YAAY,CAAC;AAShD,OAAO,IAAMC,kBAAkB,GAAG,cAAc,CAAC;AAEjD;;GAEG,GACH,OAAO,IAAMC,MAAM,GAAG,SAACC,MAAY,EAAK;IACtC,IAAMC,eAAe,GAAc,gBAA6B;YAA1BC,KAAK,SAALA,KAAK,EAAEC,MAAM,SAANA,MAAM;QACjD,IAAMC,IAAI,GAAGD,MAAM,CAACE,YAAY,CAACN,MAAM,AAAC;QACxC,IAAI,CAACF,QAAQ,CAACK,KAAK,CAAC,EAClB,OAAO;YACLI,aAAa,EAAEF,IAAI,CAACG,WAAW;YAC/BC,iBAAiB,EAAER,MAAM,IAAI,EAAE;SAChC,CAAC;QAEJ,IAAI,CAACA,MAAM,EAAE,OAAO;QAEpB,IAAIJ,QAAQ,CAACI,MAAM,CAACS,MAAM,CAAC,IAAIP,KAAK,CAACO,MAAM,KAAKT,MAAM,CAACS,MAAM,EAC3D,OAAO;YACLH,aAAa,EAAEF,IAAI,CAACK,MAAM;YAC1BD,iBAAiB,EAAER,MAAM;SAC1B,CAAC;QAEJ,IAAIJ,QAAQ,CAACI,MAAM,CAACU,GAAG,CAAC,IAAIR,KAAK,CAACO,MAAM,GAAGT,MAAM,CAACU,GAAG,EACnD,OAAO;YACLJ,aAAa,EAAEF,IAAI,CAACM,GAAG;YACvBF,iBAAiB,EAAER,MAAM;SAC1B,CAAC;QAEJ,IAAIJ,QAAQ,CAACI,MAAM,CAACW,GAAG,CAAC,IAAIT,KAAK,CAACO,MAAM,GAAGT,MAAM,CAACW,GAAG,EACnD,OAAO;YACLL,aAAa,EAAEF,IAAI,CAACO,GAAG;YACvBH,iBAAiB,EAAER,MAAM;SAC1B,CAAC;IACN,CAAC,AAAC;IAEFC,eAAe,CAACW,GAAG,GAAGd,kBAAkB,CAAC;IAEzC,OAAOG,eAAe,CAAC;AACzB,CAAC,CAAC"}