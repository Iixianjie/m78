{"version":3,"sources":["/Users/lixianjie/project/openSource/m78/packages/verify/src/common.ts"],"sourcesContent":["import { isArray, isFunction, isObject } from \"@m78/utils\";\nimport {\n  AsyncValidator,\n  ErrorTemplateInterpolate,\n  Schema,\n  Validator,\n} from \"./types\";\n\n/** 根schema的默认name */\nexport const SOURCE_ROOT_NAME = \"M78_VERIFY_ROOT_NAME\";\n\n/** 格式化并返回验证器数组 */\nexport function fmtValidator(validator: Schema[\"validator\"], isEmpty: boolean) {\n  if (isFunction(validator)) {\n    // 需要进行空校验或非空时\n    if (validator.checkEmpty || !isEmpty) {\n      return [validator];\n    }\n    return [];\n  }\n\n  if (isArray(validator)) {\n    return validator.filter((i) => {\n      if (!i) return false;\n      return i.checkEmpty || !isEmpty;\n    }) as Array<Validator | AsyncValidator>;\n  }\n\n  return [];\n}\n\n/** 是否为ErrorTemplateInterpolate对象 */\nexport function isErrorTemplateInterpolate(\n  obj: any\n): obj is ErrorTemplateInterpolate {\n  return isObject(obj) && \"errorTemplate\" in obj && \"interpolateValues\" in obj;\n}\n"],"names":["isArray","isFunction","isObject","SOURCE_ROOT_NAME","fmtValidator","validator","isEmpty","checkEmpty","filter","i","isErrorTemplateInterpolate","obj"],"mappings":"AAAA,SAASA,OAAO,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,YAAY,CAAC;AAQ3D,mBAAmB,GACnB,OAAO,IAAMC,gBAAgB,GAAG,sBAAsB,CAAC;AAEvD,gBAAgB,GAChB,OAAO,SAASC,YAAY,CAACC,SAA8B,EAAEC,OAAgB,EAAE;IAC7E,IAAIL,UAAU,CAACI,SAAS,CAAC,EAAE;QACzB,cAAc;QACd,IAAIA,SAAS,CAACE,UAAU,IAAI,CAACD,OAAO,EAAE;YACpC,OAAO;gBAACD,SAAS;aAAC,CAAC;QACrB,CAAC;QACD,OAAO,EAAE,CAAC;IACZ,CAAC;IAED,IAAIL,OAAO,CAACK,SAAS,CAAC,EAAE;QACtB,OAAOA,SAAS,CAACG,MAAM,CAAC,SAACC,CAAC,EAAK;YAC7B,IAAI,CAACA,CAAC,EAAE,OAAO,KAAK,CAAC;YACrB,OAAOA,CAAC,CAACF,UAAU,IAAI,CAACD,OAAO,CAAC;QAClC,CAAC,CAAC,CAAsC;IAC1C,CAAC;IAED,OAAO,EAAE,CAAC;AACZ,CAAC;AAED,kCAAkC,GAClC,OAAO,SAASI,0BAA0B,CACxCC,GAAQ,EACyB;IACjC,OAAOT,QAAQ,CAACS,GAAG,CAAC,IAAI,eAAe,IAAIA,GAAG,IAAI,mBAAmB,IAAIA,GAAG,CAAC;AAC/E,CAAC"}